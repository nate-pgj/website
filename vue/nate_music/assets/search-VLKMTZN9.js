import{_ as p,N as o,f,k as m,m as _,l as g,r as y,o as a,c as n,e as c,F as v,g as A,w as V,n as k,q as x,b as S,t as U}from"./index-BpxGVssb.js";import{M as E}from"./music-list-DsE2Wogh.js";const L={components:{MusicList:E},data(){return{searchValue:"",Artists:[],list:[],page:0,lockUp:!0}},created(){this.getHot()},methods:{getHot(){o({url:"search/hot"}).then(e=>{this.Artists=e.result.hots.slice(0,5),console.log("this.Artists",this.Artists)})},musicSearch(e,s=0,t=100){o({url:`search?offset=${s*t}&limit=${t}&keywords=${this.searchValue}`}).then(u=>{e&&e(u.result)})},getMusicDetail(e,s){o({url:`song/detail?ids=${e}`}).then(t=>{s&&s(t.songs[0].al.picUrl)})},clickHot(e){this.searchValue=e,this.onEnter()},onEnter(){if(this.searchValue.replace(/(^\s+)|(\s+$)/g,"")===""){alert("搜索内容不能为空！");return}const e=this;this.musicSearch(function(s){e.list=f(s.songs)})},async selectItem(e){const s=this;try{this.getMusicDetail(e.id,function(t){e.image=m(t),s.selectAddPlay(e)})}catch{alert("哎呀，出错啦~")}},pullUpLoad(){this.page+=1},..._({setPlaying:"SET_PLAYING"}),...g(["selectAddPlay"])}},M={class:"search flex-col"},P={class:"search-head"},w=["onClick"],H={class:"flex-1 overflow-hidden"};function N(e,s,t,u,i,r){const h=y("music-list");return a(),n("div",M,[c("div",P,[(a(!0),n(v,null,A(i.Artists,(l,d)=>(a(),n("span",{key:d,onClick:D=>r.clickHot(l.first)},U(l.first),9,w))),128)),V(c("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>i.searchValue=l),class:"search-input",type:"text",placeholder:"音乐/歌手",onKeyup:s[1]||(s[1]=x((...l)=>r.onEnter&&r.onEnter(...l),["enter"]))},null,544),[[k,i.searchValue,void 0,{trim:!0}]])]),c("div",H,[S(h,{ref:"musicList",list:i.list,"list-type":"pullup",onSelect:r.selectItem,onPullUp:r.pullUpLoad},null,8,["list","onSelect","onPullUp"])])])}const C=p(L,[["render",N],["__scopeId","data-v-bfd283b3"]]);export{C as default};
